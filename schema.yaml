models:
  - class_name: Users
    table_name: m_users
    description: |
      実在する利用者（人）を一意に管理するテーブル
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        unique: true
        nullable: false
        default: "lambda: str(uuid.uuid4())"
        comment: ユーザーUUID
      - name: user_name
        type: String
        args: [50]
        nullable: false
        comment: 氏名
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数

  - class_name: Tenants
    table_name: m_tenants
    description: |
      会社ごとのテナント情報
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: tenant_uuid
        type: String
        args: [36]
        unique: true
        nullable: false
        default: "lambda: str(uuid.uuid4())"
        comment: テナントUUID
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数

  - class_name: Employee
    table_name: employees
    description: |
      会社ごとにどのユーザーが所属しているか管理
      同じユーザーが再入社した場合は新しいレコードを追加し、履歴を保持する
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: tenant_uuid
        type: String
        args: [36]
        nullable: false
        comment: テナントUUID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: belong_start_date
        type: Date
        nullable: false
        comment: 所属開始日
      - name: belong_end_date
        type: Date
        nullable: true
        comment: 所属終了日（現役中はNULL）
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数

    constraints:
      - type: foreign_key
        columns: [user_uuid]
        references:
          table: m_users
          columns: [user_uuid]
      - type: foreign_key
        columns: [tenant_uuid]
        references:
          table: m_tenants
          columns: [tenant_uuid]
      - type: unique
        columns: [tenant_uuid, user_uuid, belong_start_date]

  - class_name: GroundFormat
    table_name: m_ground_format
    description: 事由マスタ
    mapper_args:
      version_id_col: update_count
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: ground_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
        comment: 事由コード
      - name: ground_name
        type: String
        args: [30]
        collation: ja_JP.utf8
        nullable: false
        comment: 事由名
      - name: labor_day_classification
        type: EnumType
        args:
          - enum_class=LaborDayClassification
        nullable: false
        comment: 出勤率(分母)
      - name: attendance_date_classification
        type: EnumType
        args:
          - enum_class=AttendanceDateClassification
        nullable: false
        comment: 出勤率(分子)
      - name: wage_classification
        type: EnumType
        args:
          - enum_class=WageClassification
        nullable: false
        comment: 賃金
      - name: timecard_available_flg
        type: EnumType
        args:
          - enum_class=TimecardAvailableFlg
        nullable: false
        comment: 出勤簿での利用を許可するか
      - name: non_stamp_flg
        type: EnumType
        args:
          - enum_class=NonStampFlg
        nullable: false
        comment: 打刻時間未使用フラグ
      - name: workflow_flg
        type: EnumType
        args:
          - enum_class=WorkflowFlg
        nullable: false
        comment: 事由申請の対象とするか
      - name: color
        type: EnumType
        args:
          - enum_class=Color
        nullable: false
        comment: 色
      - name: default_flg
        type: Boolean
        nullable: false
        comment: デフォルトフラグ
      - name: contents
        type: String
        args: [4096]
        collation: ja_JP.utf8
        nullable: true
        comment: 補足説明
      - name: create_date
        type: TIMESTAMP
        default: datetime.now
        nullable: false
      - name: create_employee_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
      - name: update_employee_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
      - name: update_count
        type: Integer
        nullable: false
    indexes:
      - [ground_code]
    uniques:
      - [ground_code]

  - class_name: WorkSchedule
    table_name: m_work_schedule
    description: 勤務体系マスタ（共通）
    mapper_args:
      polymorphic_on: type
      polymorphic_identity: normal
      version_id_col: update_count
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: tenant_uuid
        type: String
        args: [36]
        collation: ja_JP.utf8
        nullable: false
        comment: テナントUUID
      - name: work_schedule_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
        comment: 勤務体系コード
      - name: work_schedule_name
        type: String
        args: [30]
        collation: ja_JP.utf8
        nullable: false
        comment: 勤務体系名
      - name: working_system_abbreviation
        type: String
        args: [4]
        collation: ja_JP.utf8
        nullable: false
        comment: 勤務体系略名
      - name: working_system_type
        type: EnumType
        args:
          - enum_class=WorkingSystemType
        nullable: false
        comment: 勤務の種類
      - name: is_job_before_start_time
        type: EnumType
        args:
          - enum_class=JobBeforeStartTime
        nullable: true
        comment: 始業前労働を含む
      - name: job_start
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: 始業時間
      - name: job_end
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: 終業時間
      - name: term_from
        type: Date
        nullable: false
        comment: 有効開始日
      - name: term_to
        type: Date
        nullable: true
        comment: 有効終了日
      - name: create_date
        type: TIMESTAMP
        default: datetime.now
        nullable: false
      - name: create_employee_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
      - name: update_employee_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
      - name: update_count
        type: Integer
        nullable: false
      - name: type
        type: String
        args: [20]
        collation: ja_JP.utf8
        nullable: false
        default: normal
        comment: 勤務体系種別

  - class_name: FlexWorkSchedule
    table_name: m_work_schedule_flex
    description: 勤務体系マスタ（フレックス）
    inherits: WorkSchedule
    mapper_args:
      polymorphic_identity: flex
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: false
        foreign_key: m_work_schedule.id
      - name: core_start
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: コアタイム[開始]
      - name: core_end
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: コアタイム[終了]
      - name: flex_start
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: フレキシブルタイム[開始]
      - name: flex_end
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: フレキシブルタイム[終了]

  - class_name: TransformationWorkSchedule
    table_name: m_work_schedule_transformation
    description: 勤務体系マスタ（変形時間労働制）
    inherits: WorkSchedule
    mapper_args:
      polymorphic_identity: transformation
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: false
        foreign_key: m_work_schedule.id
      - name: office_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
        comment: 事業所コード
      - name: business_type
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
        comment: 職種コード
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: flexible_labor_type
        type: EnumType
        args:
          - enum_class=FlexibleLaborType
        nullable: true
        comment: 変形時間労働制のタイプ
      - name: ground_code
        type: String
        args: [10]
        collation: ja_JP.utf8
        nullable: false
        comment: 事由コード
      - name: job_start
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: 始業時間
      - name: job_end
        type: String
        args: [5]
        collation: ja_JP.utf8
        nullable: true
        comment: 終業時間

  - class_name: TimeCardLayer
    table_name: t_time_card_layer
    description: タイムカード層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: work_schedule_code
        type: String
        args: [10]
        nullable: true
        comment: 勤務体系コード
      - name: stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 出勤時間
      - name: stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 退勤時間
      - name: start_time_office_code
        type: String
        args: [10]
        nullable: true
        comment: 出勤打刻_事業所コード
      - name: end_time_office_code
        type: String
        args: [10]
        nullable: true
        comment: 退勤打刻_事業所コード
      - name: telework_flg
        type: Boolean
        nullable: true
        comment: テレワークフラグ
      - name: smile_mark
        type: String
        args: [10]
        nullable: true
        comment: スマイルマーク
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: TimeCardLayerHistory
    table_name: t_time_card_layer_history
    description: |
      タイムカード層の履歴（保証トランザクション対応）  
      更新・削除・ロールバックなどの際に履歴を保持する
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（TimeCardLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: work_schedule_code
        type: String
        args: [10]
        nullable: true
        comment: 勤務体系コード
      - name: stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 出勤時間
      - name: stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 退勤時間
      - name: start_time_office_code
        type: String
        args: [10]
        nullable: true
        comment: 出勤打刻_事業所コード
      - name: end_time_office_code
        type: String
        args: [10]
        nullable: true
        comment: 退勤打刻_事業所コード
      - name: telework_flg
        type: Boolean
        nullable: true
        comment: テレワークフラグ
      - name: smile_mark
        type: String
        args: [10]
        nullable: true
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数

      # 保証トランザクション・履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態（pending/committed/rolledback等）
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ

    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: StandardWorkLayer
    table_name: t_standard_work_layer
    description: 標準労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: ground_code
        type: String
        args: [10]
        nullable: true
        comment: 事由コード
      - name: stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 出勤時間
      - name: stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 退勤時間
      - name: rounded_stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め出勤時間
      - name: rounded_stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め退勤時間
      - name: job_start
        type: String
        args: [8]
        nullable: true
        comment: 始業時間
      - name: job_end
        type: String
        args: [8]
        nullable: true
        comment: 終業時間
      - name: working_interval
        type: Integer
        nullable: true
        comment: インターバル時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数    
    uniques:
      - [user_uuid, target_date]

  - class_name: StandardWorkLayerHistory
    table_name: t_standard_work_layer_history
    description: |
      標準労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（StandardWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: ground_code
        type: String
        args: [10]
        nullable: true
        comment: 事由コード
      - name: stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 出勤時間
      - name: stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 退勤時間
      - name: rounded_stamping_start_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め出勤時間
      - name: rounded_stamping_end_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め退勤時間
      - name: job_start
        type: String
        args: [8]
        nullable: true
        comment: 始業時間
      - name: job_end
        type: String
        args: [8]
        nullable: true
        comment: 終業時間
      - name: working_interval
        type: Integer
        nullable: true
        comment: インターバル時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態（pending/committed/rolledback等）
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: BreakLayer
    table_name: t_break_layer
    description: 休憩時間層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: break_start_time
        type: String
        args: [8]
        nullable: true
        comment: 休憩開始時間
      - name: break_end_time
        type: String
        args: [8]
        nullable: true
        comment: 休憩終了時間
      - name: rounded_break_start_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め休憩開始時間
      - name: rounded_break_end_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め休憩終了時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]


  - class_name: BreakLayerHistory
    table_name: t_break_layer_history
    description: |
      休憩時間層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（BreakLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: break_start_time
        type: String
        args: [8]
        nullable: true
        comment: 休憩開始時間
      - name: break_end_time
        type: String
        args: [8]
        nullable: true
        comment: 休憩終了時間
      - name: rounded_break_start_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め休憩開始時間
      - name: rounded_break_end_time
        type: String
        args: [8]
        nullable: true
        comment: 丸め休憩終了時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態（pending/committed/rolledback等）
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: StatutoryWorkLayer
    table_name: t_statutory_work_layer
    description: 法定労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: standard_legal_minutes
        type: Integer
        nullable: true
        comment: 標準法定労働時間
      - name: legal_job_minutes
        type: Integer
        nullable: true
        comment: 法定労働時間
      - name: legal_overwork_minutes
        type: Integer
        nullable: true
        comment: 法定外労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: StatutoryWorkLayerHistory
    table_name: t_statutory_work_layer_history
    description: |
      法定労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（StatutoryWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: standard_legal_minutes
        type: Integer
        nullable: true
        comment: 標準法定労働時間
      - name: legal_job_minutes
        type: Integer
        nullable: true
        comment: 法定労働時間
      - name: legal_overwork_minutes
        type: Integer
        nullable: true
        comment: 法定外労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態（pending/committed/rolledback等）
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: PrescribedWorkLayer
    table_name: t_prescribed_work_layer
    description: 所定労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: standard_job_minutes
        type: Integer
        nullable: true
        comment: 標準所定労働時間
      - name: job_total_minutes
        type: Integer
        nullable: true
        comment: 所定労働時間
      - name: job_overwork_minutes
        type: Integer
        nullable: true
        comment: 所定外労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: PrescribedWorkLayerHistory
    table_name: t_prescribed_work_layer_history
    description: 所定労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（PrescribedWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: standard_job_minutes
        type: Integer
        nullable: true
        comment: 標準所定労働時間
      - name: job_total_minutes
        type: Integer
        nullable: true
        comment: 所定労働時間
      - name: job_overwork_minutes
        type: Integer
        nullable: true
        comment: 所定外労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 以下履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: PrescribedHolidayWorkLayer
    table_name: t_prescribed_holiday_work_layer
    description: 所定休日労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: prescribed_holiday_work_minutes
        type: Integer
        nullable: true
        comment: 所定休日労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: PrescribedHolidayWorkLayerHistory
    table_name: t_prescribed_holiday_work_layer_history
    description: 所定休日労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（PrescribedHolidayWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: prescribed_holiday_work_minutes
        type: Integer
        nullable: true
        comment: 所定休日労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 以下履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: StatutoryHolidayWorkLayer
    table_name: t_statutory_holiday_work_layer
    description: 法定休日労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: statutory_holiday_work_minutes
        type: Integer
        nullable: true
        comment: 法定休日労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: StatutoryHolidayWorkLayerHistory
    table_name: t_statutory_holiday_work_layer_history
    description: 法定休日労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（StatutoryHolidayWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: statutory_holiday_work_minutes
        type: Integer
        nullable: true
        comment: 法定休日労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 以下履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: NightWorkLayer
    table_name: t_night_work_layer
    description: 深夜労働層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: late_night_overwork_minutes
        type: Integer
        nullable: true
        comment: 深夜労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: NightWorkLayerHistory
    table_name: t_night_work_layer_history
    description: 深夜労働層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（NightWorkLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: late_night_overwork_minutes
        type: Integer
        nullable: true
        comment: 深夜労働時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 以下履歴管理用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: PaidLeaveLayer
    table_name: t_paid_leave_layer
    description: 有給休暇層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: paid_holiday_hours
        type: Integer
        nullable: true
        comment: 有給時間数
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: PaidLeaveLayerHistory
    table_name: t_paid_leave_layer_history
    description: 有給休暇層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（PaidLeaveLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: paid_holiday_hours
        type: Integer
        nullable: true
        comment: 有給時間数
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: ChildLeaveLayer
    table_name: t_child_leave_layer
    description: 育児休暇層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: child_time_leave_hours
        type: Integer
        nullable: true
        comment: 育児時間休暇
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: ChildLeaveLayerHistory
    table_name: t_child_leave_layer_history
    description: 育児休暇層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（ChildLeaveLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: child_time_leave_hours
        type: Integer
        nullable: true
        comment: 育児時間休暇
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: LateEarlyLayer
    table_name: t_late_early_layer
    description: 遅刻早退層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: late_minutes
        type: Integer
        nullable: true
        comment: 遅刻時間
      - name: early_departure_minutes
        type: Integer
        nullable: true
        comment: 早退時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: LateEarlyLayerHistory
    table_name: t_late_early_layer_history
    description: 遅刻早退層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（LateEarlyLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: late_minutes
        type: Integer
        nullable: true
        comment: 遅刻時間
      - name: early_departure_minutes
        type: Integer
        nullable: true
        comment: 早退時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: AbsenceLayer
    table_name: t_absence_layer
    description: 欠勤層
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: absence_minutes
        type: Integer
        nullable: true
        comment: 欠勤時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: AbsenceLayerHistory
    table_name: t_absence_layer_history
    description: 欠勤層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（AbsenceLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: absence_minutes
        type: Integer
        nullable: true
        comment: 欠勤時間
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: SubstituteLeaveLayer
    table_name: t_substitute_leave_layer
    description: 代休層（日単位、実体は存在のみで表現）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: SubstituteLeaveLayerHistory
    table_name: t_substitute_leave_layer_history
    description: 代休層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（SubstituteLeaveLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: SuspensionLayer
    table_name: t_suspension_layer
    description: 休職層（日単位、実体は存在のみで表現）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: SuspensionLayerHistory
    table_name: t_suspension_layer_history
    description: 休職層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（SuspensionLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: ClosedLayer
    table_name: t_closed_layer
    description: 休業層（日単位、実体は存在のみで表現）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        index: true
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        default: datetime.now
        onupdate: datetime.now
        nullable: false
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
    uniques:
      - [user_uuid, target_date]

  - class_name: ClosedLayerHistory
    table_name: t_closed_layer_history
    description: 休業層の履歴（保証トランザクション対応）
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: 履歴ID
      - name: original_id
        type: Integer
        nullable: false
        comment: 元テーブル（ClosedLayer）のID
      - name: user_uuid
        type: String
        args: [36]
        nullable: false
        comment: ユーザーUUID
      - name: target_date
        type: Date
        nullable: false
        comment: 対象日
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 作成者ユーザーコード
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
        comment: 更新日時
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
        comment: 更新者ユーザーコード
      - name: update_count
        type: Integer
        nullable: false
        comment: 更新回数
      # 補償トランザクション用
      - name: transaction_id
        type: String
        args: [36]
        nullable: false
        comment: トランザクションID
      - name: history_version
        type: Integer
        nullable: false
        comment: 履歴バージョン
      - name: operation_type
        type: String
        args: [10]
        nullable: false
        comment: 操作種別（I/U/D）
      - name: transaction_status
        type: String
        args: [20]
        nullable: false
        comment: トランザクション状態
      - name: operated_at
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 操作日時
      - name: operated_by
        type: String
        args: [36]
        nullable: false
        comment: 操作者UUID
      - name: is_latest
        type: Boolean
        nullable: false
        default: true
        comment: 最新レコードフラグ
    constraints:
      - type: index
        columns: [original_id]
      - type: index
        columns: [transaction_id]
      - type: index
        columns: [user_uuid, target_date]
      - type: unique
        columns: [original_id, history_version]

  - class_name: Role
    table_name: m_role
    description: ロール（役割）マスタ
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: role_code
        type: String
        args: [30]
        nullable: false
        comment: ロールコード
      - name: role_name
        type: String
        args: [30]
        nullable: false
        comment: ロール名
      - name: permission
        type: EnumType
        args:
          - enum_class=Permission
        nullable: false
        comment: 代行可能
      - name: system_company_flg
        type: EnumType
        args:
          - enum_class=SystemCompanyFlg
        nullable: false
        comment: システム管理会社フラグ
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
      - name: update_count
        type: Integer
        nullable: false
    indexes:
      - [role_code]
    uniques:
      - [role_code]
    mapper_args:
      version_id_col: update_count

  - class_name: Policy
    table_name: m_policy
    description: アクセス制御ポリシーマスタ
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: principal_type
        type: EnumType
        args:
          - enum_class=PrincipalType
          - int_enum=True
        nullable: false
        comment: 主体種別
      - name: principal_id
        type: String
        args: [64]
        nullable: false
        comment: 主体ID
      - name: resource_type
        type: EnumType
        args:
          - enum_class=ResourceType
          - int_enum=True
        nullable: false
        comment: リソース種別
      - name: resource_id
        type: String
        args: [64]
        nullable: false
        comment: リソースID
      - name: action
        type: EnumType
        args:
          - enum_class=ActionType
          - int_enum=True
        nullable: false
        comment: アクション
      - name: effect
        type: EnumType
        args:
          - enum_class=EffectType
          - int_enum=True
        nullable: false
        comment: 許可 or 拒否
      - name: condition
        type: Text
        nullable: true
        comment: 条件[JSON]
      - name: create_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        comment: 作成日時
      - name: create_user_uuid
        type: String
        args: [10]
        nullable: false
      - name: update_date
        type: TIMESTAMP
        nullable: false
        default: datetime.now
        onupdate: datetime.now
      - name: update_user_uuid
        type: String
        args: [10]
        nullable: false
      - name: update_count
        type: Integer
        nullable: false
    indexes:
      - [principal_type, principal_id, resource_type, resource_id, action]
    uniques:
      - [principal_type, principal_id, resource_type, resource_id, action]
    mapper_args:
      version_id_col: update_count


  - class_name: Screen
    table_name: m_screen
    description: 画面マスタ
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: screen_code
        type: String
        args: [6]
        nullable: false
        comment: 画面コード
      - name: screen_name
        type: String
        args: [255]
        nullable: false
        comment: 画面名
    indexes:
      - [screen_code]
    uniques:
      - [screen_code]

  - class_name: Api
    table_name: m_api
    description: APIマスタ
    columns:
      - name: id
        type: Integer
        primary_key: true
        autoincrement: true
        comment: サロゲートキー
      - name: api_name
        type: String
        args: [255]
        nullable: false
        comment: API名
      - name: screen_code
        type: String
        args: [6]
        nullable: false
        comment: 画面コード
    indexes:
      - [api_name, screen_code]
    uniques:
      - [api_name, screen_code]
